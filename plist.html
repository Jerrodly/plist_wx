<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>


<script type="text/javascript">
    var J = {
        $namespace : function(name){
            if(!name) return false;
            name = name.split(".");
            var len = name.length;
            var ns = window;
            for(var i= 0; i<len; i++){
                var n = name[i];
                ns[n] = ns[n] || {};
                ns = ns[n];
            }
            return ns;
        },
        Class:function(){
            var length = arguments.length;
            var option = arguments[length-1];
            option.init = option.init || function(){};

            if(length === 2){
                var superClass = arguments[0].extend;

                var tempClass = function() {};
                tempClass.prototype = superClass.prototype;

                var subClass = function() {
                    return new subClass.prototype._init(arguments);
                }

                subClass.superClass = superClass.prototype;
                subClass.callSuper = function(context,func){
                    var slice = Array.prototype.slice;
                    var a = slice.call(arguments, 2);
                    var func = subClass.superClass[func];

                    if(func){
                        func.apply(context, a.concat(slice.call(arguments)));
                    }
                };
                subClass.prototype = new tempClass();
                subClass.prototype.constructor = subClass;

                J.extend(subClass.prototype, option);

                subClass.prototype._init = function(args){
                    this.init.apply(this, args);
                };
                subClass.prototype._init.prototype = subClass.prototype;
                return subClass;

            }else if(length === 1){
                var newClass = function() {
                    return new newClass.prototype._init(arguments);
                }
                newClass.prototype = option;
                newClass.prototype._init = function(arg){
                    this.init.apply(this,arg);
                };
                newClass.prototype.constructor = newClass;
                newClass.prototype._init.prototype = newClass.prototype;
                return newClass;
            }
        },
        extend:function(destination,source){
            for(var n in source){
                if(source.hasOwnProperty(n)){
                    destination[n]=source[n];
                }
            }
            return destination;
        },
        bind:function(func, context, var_args) {
            var slice = [].slice;
            var a = slice.call(arguments, 2);
            return function(){
                return func.apply(context, a.concat(slice.call(arguments)));
            };
        },
        $package : function(ns,func){
            var target;
            if(typeof ns == "function"){
                func = ns;
                target = window;
                func.call(target,this);
            }
            else if(Object.prototype.toString.call(ns)=="[object Array]"){
                var nsArr = [this];
                for(var i in ns){
                    nsArr.push(this.$namespace(ns[i]));
                }
                func.apply(this,nsArr);
            }
            else if(typeof ns == "object"){
                target  = ns;
                func.call(target,this);
            }
        }
    };

//    window["PFT"] = { name:"PFT"};
//    window["PFT_WX"] = { name:"PFT_WX"};
//    window["PFT"]["Util"] = {name:"Util"};


//    J.$package(["PFT","PFT.Util"],function(J,PFT,Util){
//        console.log(J);
//        console.log(PFT);
//        console.log(Util);
//    });

    var M = J.Class({
        init : function(opt){
            console.log("init")
            this.name = opt.name;
            this.age = opt.age;
        },
        type : "MEN",
        getName : function(){
            return this.name;
        },
        setName : function(name){
            this.name = name;
        },
        getAge : function(){
            return this.age;
        },
        setAge : function(age){
            this.age = age;
        }
    });
    var N = J.Class({extend:M},{
        init : function(opt){
            this.name = opt.name;
            this.age = opt.age;
        },
        getType : function(){
            return this.type;
        }
    });
    var m = new M({
        name : "huangzy",
        age : 10
    });
    var n = new N({
        name : "huangzhiyang",
        age : 166
    });
//    console.log(m.getName())
//    console.log(n.getName());
//    console.log(n.getAge());
//    console.log(n.getType());





//    J.$package(function(J){
//        console.log(J);
//    });
//    J.$package({a:1},function(J){
//        console.log(this);
//        console.log(J);
//    });



//    console.log($namespace("PFT"));
//    console.log($namespace("PFT.Util"));
//    console.log($namespace("PFT.Util.Help"));
//    console.log(window.PFT)
</script>
</body>
</html>